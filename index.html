<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Battle Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .battle-entry {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-red-900 via-gray-900 to-blue-900">
    <div class="p-4 sm:p-8">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <h1 class="text-4xl font-bold text-center text-white mb-8 flex items-center justify-center gap-3">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 3l-6 6m0 0V4m0 5h5M3 21l6-6m0 0v5m0-5H4"></path>
                </svg>
                Risk Battle Simulator
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                </svg>
            </h1>

            <!-- Setup Area -->
            <div class="bg-white/10 backdrop-blur-md rounded-xl p-6 mb-6 border border-white/20">
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Attacker -->
                    <div class="bg-red-500/20 rounded-lg p-4 border-2 border-red-500">
                        <div class="flex items-center gap-2 mb-3">
                            <svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 3l-6 6m0 0V4m0 5h5M3 21l6-6m0 0v5m0-5H4"></path>
                            </svg>
                            <h2 class="text-2xl font-bold text-white">Attacker</h2>
                        </div>
                        <input
                            type="number"
                            id="attackArmies"
                            min="2"
                            value="10"
                            class="w-full px-4 py-3 text-2xl font-bold text-center bg-white/20 border-2 border-white/40 rounded-lg text-white placeholder-white/60 focus:outline-none focus:border-red-400"
                        />
                        <p class="text-white/80 text-sm mt-2 text-center">Armies available</p>
                    </div>

                    <!-- Defender -->
                    <div class="bg-blue-500/20 rounded-lg p-4 border-2 border-blue-500">
                        <div class="flex items-center gap-2 mb-3">
                            <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
                            </svg>
                            <h2 class="text-2xl font-bold text-white">Defender</h2>
                        </div>
                        <input
                            type="number"
                            id="defenseArmies"
                            min="1"
                            value="10"
                            class="w-full px-4 py-3 text-2xl font-bold text-center bg-white/20 border-2 border-white/40 rounded-lg text-white placeholder-white/60 focus:outline-none focus:border-blue-400"
                        />
                        <p class="text-white/80 text-sm mt-2 text-center">Armies available</p>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="grid md:grid-cols-3 gap-4 mt-6">
                    <button
                        id="attackBtn"
                        class="bg-orange-600 hover:bg-orange-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105 active:scale-95"
                    >
                        ‚öîÔ∏è Attack!
                    </button>
                    <button
                        id="attackToDeathBtn"
                        class="bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105 active:scale-95"
                    >
                        üíÄ Attack Until Death!
                    </button>
                    <button
                        id="resetBtn"
                        class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-all transform hover:scale-105 active:scale-95"
                    >
                        üîÑ Reset
                    </button>
                </div>
            </div>

            <!-- Victory Banner -->
            <div id="victoryBanner" class="hidden backdrop-blur-md rounded-xl p-6 mb-6 border-2 text-center"></div>

            <!-- Battle Log -->
            <div id="battleLogContainer" class="hidden bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20">
                <h3 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    <span id="battleLogTitle">Battle Log</span>
                </h3>
                <div id="battleLog" class="space-y-3 max-h-96 overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <script>
        let attackArmies = 10;
        let defenseArmies = 10;
        let battleLog = [];
        let gameOver = false;

        const attackInput = document.getElementById('attackArmies');
        const defenseInput = document.getElementById('defenseArmies');
        const attackBtn = document.getElementById('attackBtn');
        const attackToDeathBtn = document.getElementById('attackToDeathBtn');
        const resetBtn = document.getElementById('resetBtn');
        const victoryBanner = document.getElementById('victoryBanner');
        const battleLogContainer = document.getElementById('battleLogContainer');
        const battleLogElement = document.getElementById('battleLog');
        const battleLogTitle = document.getElementById('battleLogTitle');

        function rollDice(count) {
            const dice = [];
            for (let i = 0; i < count; i++) {
                dice.push(Math.floor(Math.random() * 6) + 1);
            }
            return dice.sort((a, b) => b - a);
        }

        function simulateBattle(attArm, defArm) {
            const attackDiceCount = Math.min(3, attArm - 1);
            const defenseDiceCount = Math.min(2, defArm);

            const attackDice = rollDice(attackDiceCount);
            const defenseDice = rollDice(defenseDiceCount);

            let attackLosses = 0;
            let defenseLosses = 0;

            const comparisons = Math.min(attackDice.length, defenseDice.length);
            
            for (let i = 0; i < comparisons; i++) {
                if (attackDice[i] > defenseDice[i]) {
                    defenseLosses++;
                } else {
                    attackLosses++;
                }
            }

            return {
                attackDice,
                defenseDice,
                attackLosses,
                defenseLosses,
                attArm: attArm - attackLosses,
                defArm: defArm - defenseLosses
            };
        }

        function updateUI() {
            attackInput.value = attackArmies;
            defenseInput.value = defenseArmies;
            
            const canAttack = !gameOver && attackArmies > 1 && defenseArmies > 0;
            attackBtn.disabled = !canAttack;
            attackToDeathBtn.disabled = !canAttack;
            
            attackInput.disabled = gameOver;
            defenseInput.disabled = gameOver;
        }

        function showVictory(winner) {
            gameOver = true;
            const isAttacker = winner === 'attacker';
            victoryBanner.className = `${isAttacker ? 'bg-red-500/30 border-red-500' : 'bg-blue-500/30 border-blue-500'} backdrop-blur-md rounded-xl p-6 mb-6 border-2 text-center`;
            
            const icon = isAttacker ? 'üèÜ' : 'üõ°Ô∏è';
            const title = isAttacker ? 'Attacker Victory!' : 'Defender Holds!';
            
            victoryBanner.innerHTML = `
                <div class="flex items-center justify-center gap-3 mb-2">
                    <span class="text-4xl">${icon}</span>
                    <h2 class="text-3xl font-bold text-white">${title}</h2>
                    <span class="text-4xl">${icon}</span>
                </div>
                <p class="text-white/90 text-lg">
                    Remaining armies: <span class="font-bold text-red-400">${attackArmies}</span> vs <span class="font-bold text-blue-400">${defenseArmies}</span>
                </p>
            `;
            victoryBanner.classList.remove('hidden');
        }

        function addBattleLogEntry(entry) {
            const logEntry = document.createElement('div');
            logEntry.className = 'bg-white/5 rounded-lg p-4 border border-white/10 battle-entry';
            
            const attackDiceHTML = entry.attackDice.map(die => 
                `<div class="bg-red-600 text-white font-bold w-10 h-10 rounded flex items-center justify-center text-lg">${die}</div>`
            ).join('');
            
            const defenseDiceHTML = entry.defenseDice.map(die => 
                `<div class="bg-blue-600 text-white font-bold w-10 h-10 rounded flex items-center justify-center text-lg">${die}</div>`
            ).join('');
            
            logEntry.innerHTML = `
                <div class="flex items-center justify-between gap-4">
                    <div class="flex-1 text-center">
                        <p class="text-red-400 font-semibold mb-2">Attack</p>
                        <div class="flex justify-center gap-2">${attackDiceHTML}</div>
                    </div>
                    <div class="text-center">
                        <p class="text-white/60 text-sm mb-2">Losses</p>
                        <p class="text-red-400 font-bold">${entry.attackLosses}</p>
                        <p class="text-white/40 text-xs my-1">vs</p>
                        <p class="text-blue-400 font-bold">${entry.defenseLosses}</p>
                    </div>
                    <div class="flex-1 text-center">
                        <p class="text-blue-400 font-semibold mb-2">Defense</p>
                        <div class="flex justify-center gap-2">${defenseDiceHTML}</div>
                    </div>
                </div>
            `;
            
            battleLogElement.insertBefore(logEntry, battleLogElement.firstChild);
        }

        function updateBattleLog() {
            battleLogTitle.textContent = `Battle Log (${battleLog.length} ${battleLog.length === 1 ? 'skirmish' : 'skirmishes'})`;
            if (battleLog.length > 0) {
                battleLogContainer.classList.remove('hidden');
            }
        }

        attackBtn.addEventListener('click', () => {
            if (attackArmies <= 1 || defenseArmies <= 0) return;

            const result = simulateBattle(attackArmies, defenseArmies);
            
            battleLog.push({
                attackDice: result.attackDice,
                defenseDice: result.defenseDice,
                attackLosses: result.attackLosses,
                defenseLosses: result.defenseLosses
            });

            addBattleLogEntry(battleLog[battleLog.length - 1]);
            updateBattleLog();

            attackArmies = result.attArm;
            defenseArmies = result.defArm;

            if (defenseArmies === 0) {
                showVictory('attacker');
            } else if (attackArmies <= 1) {
                showVictory('defender');
            }

            updateUI();
        });

        attackToDeathBtn.addEventListener('click', () => {
            let attArm = attackArmies;
            let defArm = defenseArmies;

            while (attArm > 1 && defArm > 0) {
                const result = simulateBattle(attArm, defArm);
                battleLog.push({
                    attackDice: result.attackDice,
                    defenseDice: result.defenseDice,
                    attackLosses: result.attackLosses,
                    defenseLosses: result.defenseLosses
                });
                attArm = result.attArm;
                defArm = result.defArm;
            }

            battleLogElement.innerHTML = '';
            battleLog.forEach(entry => addBattleLogEntry(entry));
            updateBattleLog();

            attackArmies = attArm;
            defenseArmies = defArm;
            showVictory(defenseArmies === 0 ? 'attacker' : 'defender');
            updateUI();
        });

        resetBtn.addEventListener('click', () => {
            attackArmies = 10;
            defenseArmies = 10;
            battleLog = [];
            gameOver = false;
            
            battleLogElement.innerHTML = '';
            battleLogContainer.classList.add('hidden');
            victoryBanner.classList.add('hidden');
            
            updateUI();
        });

        attackInput.addEventListener('change', (e) => {
            attackArmies = Math.max(2, parseInt(e.target.value) || 2);
            updateUI();
        });

        defenseInput.addEventListener('change', (e) => {
            defenseArmies = Math.max(1, parseInt(e.target.value) || 1);
            updateUI();
        });

        updateUI();
    </script>
</body>
</html>